def register(bot):
    def counter(bot, msg, match):
        brackets = {
            '(':')', '[':']', '{':'}', '<':'>', '"':'"',
            '“':'”', '‘':'’', '‹':'›', '«':'»',
            '（':'）', '［':'］', '｛':'｝', '｟':'｠',
            '⦅':'⦆', '〚':'〛', '⦃':'⦄',
            '「':'」', '〈':'〉', '《':'》', '【':'】', '〔':'〕', '⦗':'⦘',
            '『':'』', '〖':'〗', '〘':'〙',
            '⟦':'⟧', '⟨':'⟩', '⟪':'⟫', '⟮':'⟯', '⟬':'⟭', '⌈':'⌉', '⌊':'⌋', '⦇':'⦈', '⦉':'⦊',
            '❛':'❜', '❝':'❞', '❨':'❩', '❪':'❫', '❴':'❵', '❬':'❭', '❮':'❯', '❰':'❱', '❲':'❳',
            '﴾':'﴿',
            '〈':'〉', '⦑':'⦒', '⧼':'⧽',
            '﹙':'﹚', '﹛':'﹜', '﹝':'﹞',
            '⁽':'⁾', '₍':'₎',
            '⦋':'⦌', '⦍':'⦎', '⦏':'⦐', '⁅':'⁆',
            '⸢':'⸣', '⸤':'⸥',
        }
        result = []

        for c in msg['body']:
            char = brackets.get(c)
            if len(result) > 0:
                if c == result[-1]:
                    result.pop()
                    continue
            if char is not None:
                result.append(char)


        if len(result) > 0:
            result.reverse()
            bot.send_message(''.join(result), msg['from'].bare)

    bot.hear('^(.*)$', counter)
